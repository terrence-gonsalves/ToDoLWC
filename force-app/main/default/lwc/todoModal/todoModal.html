<template>
    <template lwc:if={isOpen}>
        <section class="slds-modal slds-fade-in-open">
            <div class="slds-modal__container">
                <header class="slds-modal__header">
                    <lightning-button-icon
                        icon-name="utility:close"
                        alternative-text="Close"
                        title="Close"
                        variant="bare-inverse"
                        class="slds-modal__close"
                        onclick={handleClose}>
                        <label class="sr-only">Close</label>
                    </lightning-button-icon>
                    <h2 class="slds-modal__title slds-hyphenate">{modalTitle}</h2>
                </header>

                <div class="slds-modal__content slds-var-p-around_medium">
                    <template lwc:if={errorMessage}>
                        <div class="slds-notify slds-notify_alert slds-alert_error" role="alert">
                            <span class="slds-assistive-text">Error</span>
                            <h2>{errorMessage}</h2>
                        </div>
                    </template>

                    <lightning-input
                        label="Title"
                        name="title"
                        value={title}
                        required
                        onchange={handleTitleChange}>
                    </lightning-input>

                    <lightning-textarea
                        label="Description"
                        name="description"
                        value={description}
                        onchange={handleDescriptionChange}>
                    </lightning-textarea>

                    <lightning-input
                        type="date"
                        label="Due Date"
                        name="dueDate"
                        value={dueDate}
                        required
                        onchange={handleDueDateChange}>
                    </lightning-input>

                    <lightning-combobox
                        label="Priority"
                        name="priority"
                        value={priority}
                        placeholder="Select priority"
                        options={priorityOptions}
                        required
                        onchange={handlePriorityChange}>
                    </lightning-combobox>

                    <lightning-combobox 
                        label="Category"
                        name="category"
                        value={category}
                        placeholder="Select a category"
                        options={categoryOptions}
                        onchange={handleCategoryChange}>
                    </lightning-combobox>
                </div>

                <footer class="slds-modal__footer">
                    <lightning-button 
                        label="Cancel" 
                        title="Cancel button" 
                        onclick={handleClose} 
                        disabled={isLoading}
                        class="slds-var-m-left_x-small">
                    </lightning-button>
                    <lightning-button 
                        variant="brand" 
                        label={saveButonLabel}
                        title={saveButonLabel} 
                        onclick={handleSave} 
                        disabled={isLoading}
                        class="slds-var-m-left_x-small">
                    </lightning-button>

                </footer>
            </div>
        </section>

        <div class="slds-backdrop slds-backdrop_open"></div>
    </template>
</template>